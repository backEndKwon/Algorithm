/* 
https://school.programmers.co.kr/learn/courses/30/lessons/1844
ê²Œì„ ë§µ ìµœë‹¨ê±°ë¦¬
0 = ë²½, 1 = ê¸¸
ì´ˆê¸° ìºë¦­í„°ìœ„ì¹˜ = ì¢Œì¸¡ ìƒë‹¨ (1, 1)
ìƒëŒ€ë°© ì§„ì˜ìœ„ì¹˜ = ìš°ì¸¡ í•˜ë‹¨ (n, m)
maps	answer
[[1,0,1,1,1],[1,0,1,0,1],[1,0,1,1,1],[1,1,1,0,1],[0,0,0,0,1]]	11
[[1,0,1,1,1],[1,0,1,0,1],[1,0,1,1,1],[1,1,1,0,0],[0,0,0,0,1]]	-1
*/
/* 
ë…¼ë¦¬:
dfsë¡œ stackì„ í™œìš©í•œ ê¹Šì´ìš°ì„ íƒìƒ‰ìœ¼ë¡œ í•˜ë©´ ë¶ˆí•„ìš”í•œ ê²½ë¡œê¹Œì§€ ì°¾ëŠ”ê±° ì•„ë‹Œê°€?
ê·¸ëŸ¬ë©´ bfsë¡œ queueë¥¼ í™œìš©í•œ ë„ˆë¹„ìš°ì„ íƒìƒ‰ìœ¼ë¡œ í’€ì´í•´ë³´ê¸°

0. ë°©í–¥í‚¤ì„¤ì •
1. í˜„ì¬ ìœ„ì¹˜ì—ì„œ ìƒí•˜ì¢Œìš°ë¡œ ì´ë™í•  ìˆ˜ ìˆëŠ”ì§€ í™•ì¸
2. ë°©ë¬¸í•œ ë°°ì—´ ìƒì„±í•´ì„œ í™•ì¸(boolean)
3. ì´ë™í•  ìˆ˜ ìˆë‹¤ë©´(1ì‚¬ë¶„ë©´ì— ì¡´ì¬+n,mì‚¬ì´?+ê°ˆìˆ˜ìˆëŠ” ì§€ì ì´ 1ì¸ê°€?) ì´ë™í•œ ìœ„ì¹˜ë¥¼ íì— ë„£ê³ , ì´ë™í•  ìœ„ì¹˜ê°’ì´ 1ì´ë¼ë©´ distance +=1, ë°©ë¬¸ì—¬ë¶€ trueë¡œ ë³€ê²½
4. ê·¸ëŸ°ê²Œ ì—†ë‹¤ë©´ ë¬´ì¡°ê±´ ê°ˆ ë°©ë„ê°€ ì—†ìœ¼ë¯€ë¡œ -1 ë¦¬í„´

*/
const solution = (maps) => {
  //ìƒí•˜ ì¢Œìš°
  const dx = [0, 0, -1, 1];
  const dy = [-1, 1, 0, 0];

  //ë°©ë¬¸ì—¬ë¶€ë¥¼ í™•ì¸í•˜ê¸° ìœ„í•œ ë°°ì—´
  const n = maps.length;
  const m = maps[0].length;
  const visited = Array.from(Array(n), () => Array(m).fill(false));

  // queueì°¸ê³ í•´ì„œ bfs ì§„í–‰
  const queue = [];
  queue.push({ x: 0, y: 0, distance: 1 }); //ì²˜ìŒ ì‹œì‘ìœ„ì¹˜

  //queueê°€ 0ì´ ë ë•Œ ê¹Œì§€ ë°˜ë³µ
  while (queue.length > 0) {
    //í˜„ì¬ìœ„ì¹˜ ê°€ì ¸ì˜¤ê¸°
    const current = queue.shift();
    const { x, y, distance } = current; // êµ¬ì¡°ë¶„í•´í• ë‹¹
    //queueì—ì„œ ê°€ì ¸ì˜¨ ìœ„ì¹˜ê°’ì´ n-1, m-1ê³¼ ê°™ë‹¤ë©´ ê²Œì„ ì¢…ë£Œ
    if (x === n - 1 && y === m - 1) {
      return distance;
    }

    //ê·¸ê²Œ ì•„ë‹ˆë¼ë©´ ìƒí•˜ì¢Œìš° ì´ë™ ê°€ëŠ¥í•œì§€ í™•ì¸
    //4ê°œì˜ ë°©í–¥ìœ¼ë¡œ forë¬¸
    for (let i = 0; i < 4; i++) {
      const nx = x + dx[i]; //í•´ë‹¹ ë°©í–¥ìœ¼ë¡œ ì´ë™í•œ xì¢Œí‘œ
      const ny = y + dy[i]; //í•´ë‹¹ ë°©í–¥ìœ¼ë¡œ ì´ë™í•œ yì¢Œí‘œ

      //ë§µì„ ë²—ì–´ë‚˜ì§€ ì•Šì•˜ê³ , 0ì´ì•„ë‹Œ 1ì´ë©´ì„œ, ë°©ë¬¸í•˜ì§€ ì•Šì€ ê³³ì´ë©´ íì— ì¶”ê°€
      if (
        nx >= 0 &&
        nx < n &&
        ny >= 0 &&
        ny < m &&
        maps[nx][ny] === 1 &&
        !visited[nx][ny]
      ) {
        queue.push({ x: nx, y: ny, distance: distance + 1 });
        visited[nx][ny] = true;
      }
    }
    // console.log("ğŸ‘‰ ~ visited:", visited);
  }return -1

};

// console.log(
//   solution([
//     [1, 0, 1, 1, 1],
//     [1, 0, 1, 0, 1],
//     [1, 0, 1, 1, 1],
//     [1, 1, 1, 0, 1],
//     [0, 0, 0, 0, 1],
//   ])
// );
console.log(
  solution([
    [1, 0, 1, 1, 1],
    [1, 0, 1, 0, 1],
    [1, 0, 1, 1, 1],
    [1, 1, 1, 0, 0],
    [0, 0, 0, 0, 1],
  ])
);
